var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
import { Inject } from '@angular/core';
import { Headers as NgHeaders, Http, Request, RequestMethod, RequestOptions, URLSearchParams, QueryEncoder } from '@angular/http';
import { Observable } from 'rxjs/Observable';
import 'rxjs/add/observable/fromPromise';
import 'rxjs/add/observable/of';
import 'rxjs/add/operator/map';
import 'rxjs/add/operator/mergeMap';
import 'rxjs/add/operator/catch';
import 'rxjs/add/operator/share';
var Reflect = global['Reflect'];
var PassThroughQueryEncoder = (function (_super) {
    __extends(PassThroughQueryEncoder, _super);
    function PassThroughQueryEncoder() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PassThroughQueryEncoder.prototype.encodeKey = function (k) { return k; };
    PassThroughQueryEncoder.prototype.encodeValue = function (v) { return v; };
    return PassThroughQueryEncoder;
}(QueryEncoder));
export { PassThroughQueryEncoder };
export function standardEncoding(v) {
    return encodeURIComponent(v)
        .replace(/%40/gi, '@')
        .replace(/%3A/gi, ':')
        .replace(/%24/gi, '$')
        .replace(/%2C/gi, ',')
        .replace(/%3B/gi, ';')
        .replace(/%2B/gi, '+')
        .replace(/%3D/gi, '=')
        .replace(/%3F/gi, '?')
        .replace(/%2F/gi, '/');
}
function isObject(item) {
    return (item && typeof item === 'object' && !Array.isArray(item) && item !== null);
}
function extend(target, source) {
    if (!isObject(target) || !isObject(source))
        return target;
    Object.keys(source).forEach(function (key) {
        if (isObject(source[key])) {
            if (!target[key])
                Object.assign(target, (_a = {}, _a[key] = {}, _a));
            extend(target[key], source[key]);
        }
        else
            Object.assign(target, (_b = {}, _b[key] = source[key], _b));
        var _a, _b;
    });
    return target;
}
var AbstractApiClient = (function () {
    function AbstractApiClient(http) {
        this.http = http;
    }
    return AbstractApiClient;
}());
export { AbstractApiClient };
AbstractApiClient.ctorParameters = function () { return [
    { type: Http, decorators: [{ type: Inject, args: [Http,] },] },
]; };
var MetadataKeys = {
    Query: Symbol('apiClient:Query'),
    Path: Symbol('apiClient:Path'),
    Body: Symbol('apiClient:Body'),
    Header: Symbol('apiClient:Header'),
    Type: Symbol('apiClient:ResponseType'),
    Error: Symbol('apiClient:Error'),
};
export function BaseUrl(url, configKey) {
    return function (Target) {
        if (url instanceof Function)
            Target.prototype.getBaseUrl = url;
        else if (configKey) {
            var cached_1;
            Target.prototype.getBaseUrl = function () {
                var x = !cached_1 ? (cached_1 = this.http.get(url).map(function (r) { return r.json()[configKey]; }).share()) : cached_1;
                return x;
            };
        }
        else
            Target.prototype.getBaseUrl = function () { return Observable.fromPromise(Promise.resolve(url)); };
        return Target;
    };
}
export function Headers(headers) {
    function decorator(target, targetKey) {
        var metadataKey = MetadataKeys.Header;
        if (targetKey !== undefined) {
            var existingHeaders = Reflect.getOwnMetadata(metadataKey, target, targetKey) || [];
            existingHeaders.push({ index: undefined, key: headers });
            Reflect.defineMetadata(metadataKey, existingHeaders, target, targetKey);
        }
        else {
            var existingHeaders = Reflect.getOwnMetadata(metadataKey, target) || [];
            existingHeaders.push({ index: undefined, key: headers });
            Reflect.defineMetadata(metadataKey, existingHeaders, target, undefined);
        }
    }
    return decorator;
}
export function Query(keyOrParams) {
    var extraOptions = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        extraOptions[_i - 1] = arguments[_i];
    }
    function decorator(target, propertyKey, parameterIndex) {
        if (parameterIndex !== undefined) {
            var metadataKey = MetadataKeys.Query;
            var existingParams = Reflect.getOwnMetadata(metadataKey, target, propertyKey) || [];
            existingParams.push(__assign({ index: parameterIndex, key: keyOrParams }, extraOptions));
            Reflect.defineMetadata(metadataKey, existingParams, target, propertyKey);
        }
        else {
            var metadataKey = MetadataKeys.Query;
            var existingQuery = Reflect.getOwnMetadata(metadataKey, target) || [];
            existingQuery.push({ index: undefined, key: keyOrParams });
            Reflect.defineMetadata(metadataKey, existingQuery, target, undefined);
            return target;
        }
    }
    return decorator;
}
export function Type(arg) {
    return function decorator(target, targetKey) {
        Reflect.defineMetadata(MetadataKeys.Type, arg, target, targetKey);
    };
}
export function Error(handler) {
    function decorator(target) {
        Reflect.defineMetadata(MetadataKeys.Error, handler, target);
        return target;
    }
    return decorator;
}
var buildParamDeco = function (paramDecoName) {
    return function (key) {
        var extraOptions = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            extraOptions[_i - 1] = arguments[_i];
        }
        return function (target, propertyKey, parameterIndex) {
            var metadataKey = MetadataKeys[paramDecoName];
            var existingParams = Reflect.getOwnMetadata(metadataKey, target, propertyKey) || [];
            existingParams.push(__assign({ index: parameterIndex, key: key }, extraOptions));
            Reflect.defineMetadata(metadataKey, existingParams, target, propertyKey);
        };
    };
};
export var Path = buildParamDeco('Path');
export var Body = buildParamDeco('Body');
export var Header = buildParamDeco('Header');
var buildMethodDeco = function (method) {
    return function (url) {
        if (url === void 0) { url = ''; }
        return function (target, targetKey, descriptor) {
            descriptor.value = function () {
                var _this = this;
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                var requestUrl = url;
                if (this.http === undefined)
                    throw new TypeError("Property 'http' missing in " + this.constructor + ". Check constructor dependencies!");
                var defaultQueryParams = Reflect.getOwnMetadata(MetadataKeys.Query, target.constructor), queryParams = Reflect.getOwnMetadata(MetadataKeys.Query, target, targetKey), query = new URLSearchParams('', new PassThroughQueryEncoder());
                defaultQueryParams && defaultQueryParams.forEach(function (defaQuery) {
                    var _q = extend({}, defaQuery);
                    for (var _qk in _q.key) {
                        if (typeof _q.key[_qk] === 'function')
                            _q.key[_qk] = _q.key[_qk].call(_this);
                        query.set(_qk, _q.key[_qk]);
                    }
                });
                queryParams && queryParams.filter(function (p) { return args[p.index] !== undefined; })
                    .forEach(function (p) {
                    var queryKey, queryVal;
                    if (Object.values(p).indexOf(NO_ENCODE) !== -1)
                        _a = [p.key, args[p.index]], queryKey = _a[0], queryVal = _a[1];
                    else
                        _b = [standardEncoding(p.key), standardEncoding(args[p.index])], queryKey = _b[0], queryVal = _b[1];
                    return query.set(queryKey, queryVal);
                    var _a, _b;
                });
                var pathParams = Reflect.getOwnMetadata(MetadataKeys.Path, target, targetKey);
                pathParams && pathParams.filter(function (p) { return args[p.index] !== undefined; })
                    .forEach(function (p) { return requestUrl = requestUrl.replace("{" + p.key + "}", args[p.index]); });
                var _headers = {}, defaultHeaders = Reflect.getOwnMetadata(MetadataKeys.Header, target.constructor), methodHeaders = Reflect.getOwnMetadata(MetadataKeys.Header, target, targetKey);
                defaultHeaders && defaultHeaders.forEach(function (header) {
                    var _h = extend({}, header);
                    for (var _hk in _h.key)
                        if (typeof _h.key[_hk] === 'function')
                            _h.key[_hk] = _h.key[_hk].call(_this);
                    extend(_headers, _h.key);
                });
                methodHeaders && methodHeaders.forEach(function (h) {
                    var k = {};
                    if (typeof h.key === 'string')
                        k[h.key] = args[h.index];
                    else if (typeof h.key === 'function')
                        k = h.key.call(_this);
                    else
                        k = h.key;
                    extend(_headers, k);
                });
                var headers = new NgHeaders(_headers);
                var bodyParams = Reflect.getOwnMetadata(MetadataKeys.Body, target, targetKey), body = {};
                if (bodyParams) {
                    bodyParams = bodyParams.filter(function (p) { return args[p.index] !== undefined; });
                    if (bodyParams.some(function (p) { return args[p.index] instanceof File || args[p.index] instanceof FileList; })) {
                        body = new FormData;
                        bodyParams.forEach(function (p) {
                            var bodyArg = args[p.index];
                            if (bodyArg instanceof FileList)
                                for (var _i = 0, _a = bodyArg; _i < _a.length; _i++) {
                                    var f = _a[_i];
                                    body.append(p.key || 'files[]', f, f.name);
                                }
                            else if (bodyArg instanceof File)
                                body.append(p.key || 'files[]', bodyArg, bodyArg.name);
                            else
                                body.append(p.key || 'params[]', bodyArg);
                        });
                    }
                    else if (bodyParams.length === 1 && bodyParams[0].key === undefined)
                        body = args[bodyParams[0].index];
                    else {
                        bodyParams.map(function (p) {
                            return _a = {}, _a[p.key] = args[p.index], _a;
                            var _a;
                        }).forEach(function (p) { return Object.assign(body, p); });
                        body = JSON.stringify(body);
                    }
                }
                var responseType = Reflect.getOwnMetadata(MetadataKeys.Type, target, targetKey);
                var baseUrlObs = this.getBaseUrl ? this.getBaseUrl() : Observable.of('');
                var observable = baseUrlObs
                    .flatMap(function (baseUrl) {
                    var options = new RequestOptions({ method: method, url: baseUrl + requestUrl, headers: headers, body: body, search: query, responseType: responseType }), request = new Request(options);
                    observable = _this.http.request(request).share();
                    var errorHandler = Reflect.getOwnMetadata(MetadataKeys.Error, target.constructor);
                    errorHandler && (observable = observable.catch(errorHandler));
                    return observable;
                });
                return observable;
            };
            return descriptor;
        };
    };
};
export var GET = buildMethodDeco(RequestMethod.Get);
export var POST = buildMethodDeco(RequestMethod.Post);
export var PUT = buildMethodDeco(RequestMethod.Put);
export var DELETE = buildMethodDeco(RequestMethod.Delete);
export var HEAD = buildMethodDeco(RequestMethod.Head);
export var OPTIONS = buildMethodDeco(RequestMethod.Options);
export var PATCH = buildMethodDeco(RequestMethod.Patch);
export var NO_ENCODE = Symbol('apiClient:Query.noEncode');
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hbmd1bGFyMi1yZXN0LWNsaWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQUUsTUFBQSxFQUFPLE1BQU8sZUFBQSxDQUFnQjtBQUN2QyxPQUFPLEVBQUUsT0FBQSxJQUFXLFNBQUEsRUFBVyxJQUFBLEVBQU0sT0FBQSxFQUFtQixhQUFBLEVBQ3RELGNBQWMsRUFBdUIsZUFBQSxFQUFpQixZQUFBLEVBQWEsTUFBTyxlQUFBLENBQWdCO0FBQzVGLE9BQU8sRUFBRSxVQUFBLEVBQVcsTUFBTyxpQkFBQSxDQUFrQjtBQUM3QyxPQUFPLGlDQUFBLENBQWtDO0FBQ3pDLE9BQU8sd0JBQUEsQ0FBeUI7QUFDaEMsT0FBTyx1QkFBQSxDQUF3QjtBQUMvQixPQUFPLDRCQUFBLENBQTZCO0FBQ3BDLE9BQU8seUJBQUEsQ0FBMEI7QUFDakMsT0FBTyx5QkFBQSxDQUEwQjtBQUVqQyxJQUFNLE9BQUEsR0FBVSxNQUFBLENBQU8sU0FBQyxDQUFTLENBQUM7QUFFbEM7SUFBNkMsMkNBQVk7SUFBekQ7O0lBSUEsQ0FBQztJQUZDLDJDQUFTLEdBQVQsVUFBVSxDQUFTLElBQVksTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUMsNkNBQVcsR0FBWCxVQUFZLENBQVMsSUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5Qyw4QkFBQztBQUFELENBSkEsQUFJQyxDQUo0QyxZQUFZLEdBSXhEOztBQUtELE1BQU0sMkJBQTJCLENBQUM7SUFFaEMsTUFBTSxDQUFDLGtCQUFBLENBQW1CLENBQUMsQ0FBQztTQUN6QixPQUFDLENBQU8sT0FBQyxFQUFRLEdBQUEsQ0FBSTtTQUNyQixPQUFDLENBQU8sT0FBQyxFQUFRLEdBQUEsQ0FBSTtTQUNyQixPQUFDLENBQU8sT0FBQyxFQUFRLEdBQUEsQ0FBSTtTQUNyQixPQUFDLENBQU8sT0FBQyxFQUFRLEdBQUEsQ0FBSTtTQUNyQixP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